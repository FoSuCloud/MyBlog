
<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8" />

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>测试</title>
    <style type="text/css">
        body,html{
            height: 100%;
            width: 100%;
            padding: 0;
            margin: 0;
        }
    </style>

<body>

<script>
    const evtSource = new EventSource("http://localhost:3000/", { withCredentials: true } );
    evtSource.onmessage = function(event) {
        console.log(event.data)
    }
    evtSource.addEventListener('test',(event)=>{
        console.log(event.lastEventId) // test1
        console.log('test:',event.data)
        // evtSource.close(); // 关闭
    })
    evtSource.addEventListener('json',(event)=>{
        console.log('json:',event.data) // {'name':'yiye','age':33};
    })
    evtSource.onerror = function (event){
        console.log(event.data)
    }
</script>
</body>

</html>
