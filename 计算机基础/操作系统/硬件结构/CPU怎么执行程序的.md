#### CPU 是如何执行程序的？

#### 图灵机的工作原理
* 把"1 + 2"作为例子， `把字符 1 2 + 输入图灵机中`

* 首先，图灵机的读写头指向字符1
* 把字符1读入到 `存储设备`，这个存储设备称为图灵机的状态 `内存，如果是gpu就是显存`

* 接着读写头向右移动一个格子，把字符2读取到图灵机的状态中， `此时图灵机的状态有两个字符格子了`

* 接着再往右移动一个格子，就会碰到+号
* `把+号传输给控制单元，但是控制单元发现是运算符指令，就通知运算单元工作`
* `运算单元`接收到+号后，就会把状态中的1，2都读入并且计算
* `并且把运算的结果3存放到状态中`，接着把结果返回给控制单元
* 控制单元把`结果`传输给读写头，`读写头向右移动`，`把字符3写入纸带`

#### 冯诺依曼模型
* 在 1945 年冯诺依曼和其他计算机科学家们提出了计算机具体实现的报告，其遵循了图灵机的设计，而且还提出用电子元件构造计算机，并约定了用二进制进行计算和存储。

* 计算机基本结构为 5 个部分，分别是 `运算器`、`控制器`、`存储器`、`输入设备`、`输出设备`，这 5 个部分也被称为冯诺依曼模型。
* `运算器、控制器是在中央处理器(cpu)里的`，存储器就我们常见的内存，输入输出设备则是计算机外接的设备，比如键盘就是输入设备，显示器就是输出设备。

#### 内存
* 我们的程序和数据都是存储在内存，存储的区域是`线性`的。
* 在计算机数据存储中，存储数据的基本单位是 `字节`（byte），1 字节等于 8 位（8 `bit`）。
* `每一个字节都对应一个内存地址`。
* 内存的地址是从 0 开始编号的，然后自增排列，`最后一个地址为内存总字节数 - 1`，
* 这种结构好似我们程序里的数组，`所以内存的读写任何一个数据的速度都是一样的`。

* 例如数组,所以理论上查找第100个元素和第一个元素的读写速度是一样的
`内存地址 = 基地址 + 索引 * 元素大小`
* 除非他们在内存中不同的页上

#### 中央处理器
中央处理器也就是我们常说的 CPU，`32 位和 64 位 CPU 最主要区别在于一次能计算多少字节数据`：
* 32 位 CPU 一次可以计算 4 个字节；
* `64 位 CPU 一次可以计算 8 个字节`；

* 这里的 32 位和 64 位，通常称为 CPU 的`位宽`，代表的是 CPU `一次可以计算（运算）的数据量`。

* 如果是 8 位的 CPU，那么一次只能计算 1 个字节 0~255 范围内的数值，这样就无法一次完成计算 10000 * 500 ，
* 于是为了能一次计算大数的运算，CPU 需要支持多个 byte 一起计算，所以 CPU 位宽越大，可以计算的数值就越大，
* 比如说 32 位 CPU 能计算的最大整数是 4294967295 (2^32)。

1. `控制单元负责控制 CPU 工作`
2. `逻辑运算单元负责计算`
3. `寄存器可以分为多种类，每种寄存器的功能又不尽相同`

* CPU 中的寄存器主要作用是 `存储计算时的数据`，你可能好奇为什么有了内存还需要寄存器？原因很简单，
* `因为内存离 CPU 太远了`，而寄存器就在 CPU 里，`还紧挨着控制单元和逻辑运算单元`，自然计算时速度会很快。 

* `同理，gpu虽然有了显存，但还是需要寄存器，寄存器非常快，可以作为快速临时存储，减少显存访问`

* 常见的寄存器种类：
1. `通用寄存器`，用来`存放`需要进行运算的数据，比如需要进行加和运算的两个数据。
2. `程序计数器`，用来`存储` CPU 要执行`下一条指令`「`所在的内存地址`」，
* 注意不是存储了下一条要执行的指令，此时指令还在内存中，程序计数器只是存储了下一条指令「的地址」。
3. `指令寄存器`，`用来存放当前正在执行的指令`，也就是指令本身，指令被执行完成之前，指令都存储在这里。

* `cpu通常不会直接读取硬盘，而是先加载到内存中(主内存和缓存)，然后cpu从内存中读取数据`


#### 总线
* `总线是用于 CPU 和内存以及其他设备之间的通信`，总线可分为 3 种：
1. `地址总线`，用于指定 CPU 将要操作的`内存地址`；
2.  `数据总线`，用于`读写内存的数据`；
3.  `控制总线`，用于`发送和接收信号`，比如中断、设备复位等信号，CPU 收到信号后自然进行响应，这时也需要控制总线；

当 CPU 要读写内存数据的时候，一般需要通过下面这三个总线：

* 首先要通过「地址总线」来指定内存的地址；
* 然后通过「控制总线」`控制是读或写命令`；
* 最后通过「数据总线」来传输数据；

#### 输入、输出设备
* 输入设备向计算机输入数据，计算机经过计算后，把数据输出给输出设备。
* 期间，如果输入设备是键盘，按下按键时是需要和 CPU 进行交互的，这时就需要用到控制总线了。

#### 线路位宽与 CPU 位宽
* 数据是如何通过线路传输的呢？`其实是通过操作电压，低电压表示 0，高压电压则表示 1`。

* 如果构造了高低高这样的信号，其实就是 `101` 二进制数据，`十进制则表示 5`，如果只有`一条线路`，就意味着每次只能传递 1 bit 的数据，
* 即 0 或 1，那么传输 101 这个数据，就需要 `3 次`才能传输完成，这样的效率非常低。

* `这样一位一位传输的方式，称为串行`，下一个 bit(位) 必须等待上一个 bit 传输完成才能进行传输。
* 当然，`想一次多传一些数据，增加线路即可，这时数据就可以并行传输。`

* `为了避免低效率的串行传输的方式`，`线路的位宽最好一次就能访问到所有的内存地址`。










