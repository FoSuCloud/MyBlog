## k8s
* kubernetes简称k8s,是一个开源的，`用于管理云平台上多个主机上的容器化的应用，有助于声明式配置和自动化`
  * k8s让部署容器化的应用简单而又高效，k8s提供了应用部署，规划，更新，维护的一种机制
* [参考]("https://mp.weixin.qq.com/s/EDcNF6uC5n59eDNoh9ZdWg")

* k8s的一个核心特点：
* 能够自主的管理容器来保证云平台上的容器按照用户的期望状态运行着
* `例如想让一个apache服务一直运行，那么用户不需要关心怎么做，k8s会自动去监控，然后去重启，新建，总之，让apache服务一直提供服务`

* k8s目前着重于`提供不间断的服务状态（例如web服务器和缓存服务器）和云原生平台(noSql)`

* 在k8s中，`所有容器均在pod中运行`，一个pod可以承载一个或者多个相关的容器
* 同一个pod中的容器会部署到同一台物理机器上并且能够共享资源

* k8s支持一种特殊的网络模型，k8s创建了一个地址空间，并且不动态的分配端口，可以允许用户选择任何想使用的端口，
* `为了实现这个目的，k8s为每个pod分配ip地址`

## k8s组件
* `k8s集群由代表控制平面的组件和一组称为节点的机器组成`

## k8s对象
* k8s对象是k8s系统中的持久实体，k8s使用这些实体来表示集群的状态

## k8s架构图
* [参考]("https://www.kubernetes.org.cn/kubernetes%e8%ae%be%e8%ae%a1%e6%9e%b6%e6%9e%84")

## pod概念
* `pod是k8s最小的管理元素，pod是最小的，管理，计划，创建的最小单元`
* `pod相当于一个逻辑主机，可能包含一个或者多个关系密切的应用`
*  pod的context可以理解为多个Linux空间的集合
1. pid空间（同一个pod中，应用可以看到其他进程）
2. 网络 命名空间（同一个pod中的应用对相同的ip地址和端口有权限）
3. ipc命名空间（同一个pod中的应用可以通过vpc或者posix进行通信）
4. uts命名空间（同一个pod中的应用共享一个主机名称）
5. 同一个pod中的应用可以共享磁盘，磁盘是pod级的，应用可以通过文件系统调用

## node概念
* `node是真正运行的主机，可以是虚拟机，也可以是物理机`
* `一个node上可以有多个pod(逻辑主机)。为了管理pod,一个node节点上至少要运行container,runtime,kubelet和kube-proxy服务`
* 每个node都具有以下信息：
1. 地址：包括hostname,外网ip,内网ip
2. 条件condition: 包括OutOfDisk、Ready、MemoryPressure和DiskPressure
3. 容量:node上的可用资源，包括内存，cpu和pod总数
4. 基本信息：包括内核版本，容器引擎版本，os类型等
* 如果node被删除，所拥有的pod会自动分流到其他的node

## 集群
* 部署Kubernetes时，您会获得群集。
* Kubernetes集群由一组名为Nodes的工作机器组成，该计算机运行包含容器化的应用程序。每个群集至少有一个`工人(worker)节点`。
* Worker节点（s）主持属于应用程序工作负载的组件的POD。控制平面管理群集中的工作节点和吊舱。在生产环境中，控制平面通常跨多台计算机运行，并且群集通常运行多个节点，提供容错和高可用性。

## ingress
* Ingress 是对集群中服务的外部访问进行管理的 API 对象，典型的访问方式是 HTTP。
* Ingress 可以提供负载均衡、SSL 终结和基于名称的虚拟托管。
* `通俗来讲，就是提供了外网入口`

## kube-dns
* kube-dns负责为整个集群提供dns服务

## pvc
* 存储工程师把分布式存储系统上的总空间划分成一个一个小的存储块
* k8s管理员根据存储块创建与之一一对应的`pv资源(PV描述的是持久化存储卷)`
* pv属于集群级别资源  不属于任何名称空间 定义的时候不能指定名称空间
* 用户在创建pod的时候同时创建与`pv一一对应的pvc资源(PVC可以理解为持久化存储的 它提供了对某种持久化存储的描述,但不提供具体的实现)`
* 创建Pod的时候,系统里并没有合适的PV跟它定义的PVC绑定 也就是说此时容器想要使用的Volume不存在.这时候Pod的启动就会报错
* `我们会在Pod定义里指定创建好的PVC, 然后PVC会根据Pod的要求去自动绑定合适的PV给Pod使用。`

## nfs
*  NFS是Network File System的简写，即网络文件系统。NFS基于RPC(Remote Procedure Call)远程过程调用实现。
*  由操作系统的内核，将 NFS 文件系统的调用请求通过 TCP/IP 发送至服务端的 NFS 服务。NFS服务器执行相关的操作，并将操作结果返回给客户端
* [参考]("https://blog.csdn.net/zhonglinzhang/article/details/90636704")
