<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Title</title>
  </head>
  <body>
    <canvas id="canvas" width="1000" height="1000"></canvas>
    <script>
      function getHiDPI() {
        const c = document.createElement("canvas"),
          ctx = c.getContext("2d"),
          dpr = window.devicePixelRatio || 1,
          bsr =
            ctx["webkitBackingStorePixelRatio"] ||
            ctx["mozBackingStorePixelRatio"] ||
            ctx["msBackingStorePixelRatio"] ||
            ctx["oBackingStorePixelRatio"] ||
            ctx["backingStorePixelRatio"] ||
            1;
        return dpr / bsr;
      }
      let ratio = getHiDPI();
      let canvas = document.getElementById("canvas");
      let ctx = canvas.getContext("2d");
      let width = 500,
        height = 500;
      canvas.style.width = `${width}px`;
      canvas.style.height = `${height}px`;
      canvas.width = width * ratio;
      canvas.height = height * ratio;
      console.log(ratio);

      ctx.font = "14px system-ui";
      ctx.fillText("hello world", 30, 100);
    </script>
  </body>
</html>
