## 打开/关闭从节点的读命令执行权限
* 在使用`单机Redis服务器`时，用户可以为主服务器创建从服务器，然后通过让从服务器处理读请求来提升整个系统处理读请求的能力。

* 与这种做法不一样的是，`集群的从节点`在`默认`情况下`只会对主节点进行复制`，
* 但是不会处理客户端发送的任何命令请求：
* 每当从节点接收到命令请求的时候，它`只会向客户端发送转向消息`，`引导客户端向某个主节点重新发送命令请求`。

#### 例子
* 举个例子，对于主节点30001和它的从节点30005来说，如果我们
* 向`从节点`发送以下命令，那么`从节点将把客户端转向至主节点`，`然后再执行命令`：
```shell
# redis-cli -c -p 30001 -h 127.0.0.1
127.0.0.1:30001> role
1) "master"
2) (integer) 2492
3) 1) 1) "127.0.0.1"
      2) "30005"
      3) "2492"
127.0.0.1:30001> keys *
1) "num"
127.0.0.1:30001> get num
"10081"
```
* `针对30001的从节点`
```shell
# redis-cli -c -p 30005 -h 127.0.0.1
127.0.0.1:30005> role
1) "slave"
2) "127.0.0.1"
3) (integer) 30001
4) "connected"
5) (integer) 2464
127.0.0.1:30005> keys *
1) "num"
127.0.0.1:30005> get num
-> Redirected to slot [2765] located at 127.0.0.1:30001
"10081"
```
* 但是在某些情况下，`用户可能想要让从节点也能处理读请求`，`从而提高整个集群处理读请求的能力`。
* 为此，Redis向用户提供了READONLY和READWRITE两个命令，它们可以临时打开或关闭客户端在从节点上执行读命令的权限。

#### READONLY：打开读命令执行权限
* 用户可以通过执行以下命令，`让客户端临时获得在从服务器上执行读命令的权限`：
```shell
# redis-cli -c -p 30005 -h 127.0.0.1
127.0.0.1:30005> readonly
OK
127.0.0.1:30005> get num
"10081"
```
* `READONLY命令只对执行了该命令的客户端有效`，它并不影响正在访问相同从节点的其他客户端。

#### READWRITE：关闭读命令执行权限
* 在使用READONLY命令打开客户端对从节点的读命令执行权限之后，我们可以通过执行以下命令`重新关闭该权限`：

```shell
# redis-cli -c -p 30005 -h 127.0.0.1
127.0.0.1:30005> readonly
OK
127.0.0.1:30005> get num
"10081"
127.0.0.1:30005> readwrite
OK
127.0.0.1:30005> get num
-> Redirected to slot [2765] located at 127.0.0.1:30001
"10081"
127.0.0.1:30001>
```

