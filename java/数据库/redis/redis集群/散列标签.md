## 散列标签
* 在默认情况下，Redis将根据用户输入的整个键`计算出该键所属的槽`，然后将`键存储到相应的槽中`。
* 但是在某些情况下，出于性能方面的考虑，或者为了在同一个节点上对多个相关联的键执行批量操作，
* 我们也会想要将一些`原本不属于同一个槽的键`放到`相同的槽`里面。

* 为了满足这一需求，Redis为用户提供了`散列标签（hash tag）功能`，
* 该功能会找出键中`第一个被大括号{}包围并且非空的字符串子串（sub string）`，
* 然后根据子串计算出该键所属的槽。
* 这样一来，即使两个键原本不属于同一个槽，但`只要它们拥有相同的被包围子串`，那么程序计算出的散列值就是一样的，
* `因此Redis集群就会把它们存储到同一个槽中`。

#### hash tag散列例子
* 比如，假设我们现在有一批用户数据，它们全部以user:：为前缀，后跟用户ID，
* 其中键user::10086和user::10087原本应该分别属于两个不同的槽：
```shell
127.0.0.1:30001> set user::10086 1
-> Redirected to slot [14982] located at 127.0.0.1:30003
OK
127.0.0.1:30003> set user::10087 87
-> Redirected to slot [10919] located at 127.0.0.1:30002
OK
127.0.0.1:30002> 
```
* 然后我们看下槽 `使用CLUSTER KEYSLOT命令查看给定键所属的槽`
```shell
127.0.0.1:30002> cluster keyslot user::10086
(integer) 14982
127.0.0.1:30002> cluster keyslot user::10087
(integer) 10919
```
* `如果我们对这两个键去使用散列标签功能，让redis只根据子串计算散列值，那么这两个键将会被分配到同一个槽`
```shell
127.0.0.1:30003> cluster keyslot {user}::10086
(integer) 5474
127.0.0.1:30003> cluster keyslot {user}::10087
(integer) 5474
```
* `针对散列的键去赋值&获取值`
```shell
127.0.0.1:30002> set {user}::10086 333
OK
127.0.0.1:30002> set {user}::10087 999
OK
127.0.0.1:30002> get {user}::10086
"333"
127.0.0.1:30002> get {user}::10087
"999"
```

#### CLUSTER KEYSLOT
* 使用CLUSTER KEYSLOT命令查看给定键所属的槽
```shell
127.0.0.1:30002> CLUSTER KEYSLOT user::10086
(integer) 14982  --该键属于14982槽
```



