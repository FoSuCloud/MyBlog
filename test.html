<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<script type="text/javascript">
			// 循环单链表
			function CircleList(){
				let Node=function(element){
					this.element=element;
					this.next=null;
				}
				this.head=null;
				
				// 1.插入
				this.insert=function (position,element){
					if(position<0) return null;
					let tem=this.head;
					let node=new Node(element);
					if(position==0){
						node.next=tem;
						this.head=node;
						tem=this.head;
						// 改变尾节点指向
						while(true){
							//如果还没有循环
							if(tem.next==null){
								tem.next=this.head;
								return this.head
							}
							tem=tem.next;
							// 在插入0之前，之前的循环在当前的索引1
							if(tem.next===this.head.next){
								tem.next=this.head;
								return this.head
							}
						}
					}else{
						let len=0;
						while(true){
							// 此时position至少为1
							if(len==position-1){
								// 如果是最后一个
								if(tem.next==this.head){
									tem.next=node;
									node.next=this.head;// 循环指向头结点
								}else{
									node.next=tem.next;
									tem.next=node;
								}
								return this.head;
							}
							if(tem.next===this.head) return null;
							tem=tem.next;
							len++;
						}
					}
				}
				// 2. 删除
				this.delete=function(element){
					let tem=this.head;
					if(tem==null) return false
					// 为了不搞混节点顺序，需要针对头节点
					if(tem.element==element){
						while(true){
							if(tem.next===this.head){
								tem.next=this.head.next;
								this.head=this.head.next;
								return this.head;
							}
							tem=tem.next;
						}
					}
					
					tem=tem.next;
					while(tem!==this.head){
						if(tem.next.element==element){
							let a=tem.next;//3
							tem.next=tem.next.next;// 88->9
							a.next=null;
							return this.head;
						}
						tem=tem.next;
					}
					return false
				}
			}
			let list=new CircleList();
			console.log(list.insert(0,1))
			console.log(list.insert(0,2))
			console.log(list.insert(0,3))
			console.log(list.insert(1,9))
			console.log(list.insert(4,88));// 3,9,2,1,88
			// console.log(list.insert(14,88));//null
			
			// 删除
			// console.log(list.delete(1));//3 9 2 88
			// console.log(list.delete(88));//3 9 2 1 
			console.log(list.delete(3));//9 2 1 88
		</script>
	</body>
</html>
